{"version":3,"file":"Metadata.test.js","names":["_Metadata","require","describe","it","m1","Metadata","m2","k1","k2","m3","expect","toBe","toEqual","JSON","parse","stringify","k3","k4"],"sources":["../src/Metadata.test.ts"],"sourcesContent":["import { Metadata } from './Metadata.js';\n\ndescribe('Metadata', () => {\n  it('should create metadata', () => {\n    const m1 = new Metadata({});\n    const m2 = new Metadata({ k1: { k2: 'test1' } }, m1);\n    const m3 = new Metadata({ k1: { k2: 'test2' } }, m2);\n\n    m2.k1.k2 = 'test3';\n    expect(m3.k1.k2).toBe('test2');\n    expect(m2.k1.k2).toBe('test3');\n    expect(m1).toEqual({});\n  });\n\n  it('should unset child', () => {\n    const m1 = new Metadata({});\n    const m2 = new Metadata({ k1: { k2: 'test1' } }, m1);\n    const m3 = new Metadata({ k1: { k2: 'test2' } }, m2);\n\n    delete m3.k1.k2;\n    expect(m3.k1.k2).toBe('test1');\n    expect(m2.k1.k2).toBe('test1');\n    expect(m1).toEqual({});\n  });\n\n  it('should json serialize', () => {\n    const m1 = new Metadata({});\n    const m2 = new Metadata({ k1: { k2: 'test1' } }, m1);\n    const m3 = new Metadata({ k1: { k2: 'test2' } }, m2);\n\n    expect(JSON.parse(JSON.stringify(m1))).toEqual({});\n    expect(JSON.parse(JSON.stringify(m2))).toEqual({ k1: { k2: 'test1' } });\n    expect(JSON.parse(JSON.stringify(m3))).toEqual({ k1: { k2: 'test2' } });\n  });\n\n  it('should set subobject', () => {\n    const m1 = new Metadata({ k3: { k4: 'test3' } });\n    const m2 = new Metadata({ k1: { k2: 'test1' } }, m1);\n    const m3 = new Metadata({ k1: { k2: 'test2' } }, m2);\n\n    m3.k3.k4 = 'test4';\n    expect(JSON.parse(JSON.stringify(m1))).toEqual({ k3: { k4: 'test3' } });\n    expect(JSON.parse(JSON.stringify(m2))).toEqual({\n      k1: { k2: 'test1' },\n      k3: { k4: 'test3' },\n    });\n    expect(JSON.parse(JSON.stringify(m3))).toEqual({\n      k1: { k2: 'test2' },\n      k3: { k4: 'test4' },\n    });\n  });\n});\n"],"mappings":"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"}
{"version":3,"file":"index.js","names":["SassPagesPlugin","SassNextPlugin","config","nextConfigWebpack","webpack","SassWebpackConfig","context","module","rules","unshift","type","test","use","loader","options","esModule","sourceMap","include","modules","process","env","NODE_ENV","localIdentName"],"sources":["../src/index.ts"],"sourcesContent":["import { NextConfig } from 'next';\nexport type { StyleSheet } from '@grexie/pages-runtime-styles';\n\nexport default function SassPagesPlugin() {\n  return function SassNextPlugin(config: NextConfig) {\n    const nextConfigWebpack = config.webpack;\n\n    config.webpack = function SassWebpackConfig(config, context: any) {\n      config = nextConfigWebpack?.(config, context) ?? config;\n\n      config.module?.rules?.unshift(\n        {\n          type: 'javascript/esm',\n          test: /\\.s[ac]ss$/,\n          use: [\n            '@grexie/pages-style-loader',\n            {\n              loader: 'css-loader',\n              options: {\n                esModule: false,\n                sourceMap: true,\n              },\n            },\n            {\n              loader: 'sass-loader',\n            },\n          ],\n          include: /\\.global\\.s[ac]ss$/,\n        },\n        {\n          type: 'javascript/esm',\n          test: /\\.s[ac]ss$/,\n          use: [\n            '@grexie/pages-style-loader',\n            {\n              loader: 'css-loader',\n              options: {\n                esModule: false,\n                modules:\n                  process.env.NODE_ENV === 'production'\n                    ? true\n                    : {\n                        localIdentName:\n                          '[path][name]__[local]--[hash:base64:5]',\n                      },\n              },\n            },\n            {\n              loader: 'sass-loader',\n            },\n          ],\n          include: /\\.module\\.s[ac]ss$/,\n        }\n      );\n\n      return config;\n    };\n    return config;\n  };\n}\n"],"mappings":"AAGA,eAAe,SAASA,eAAeA,CAAA,EAAG;EACxC,OAAO,SAASC,cAAcA,CAACC,MAAkB,EAAE;IACjD,MAAMC,iBAAiB,GAAGD,MAAM,CAACE,OAAO;IAExCF,MAAM,CAACE,OAAO,GAAG,SAASC,iBAAiBA,CAACH,MAAM,EAAEI,OAAY,EAAE;MAChEJ,MAAM,GAAGC,iBAAiB,GAAGD,MAAM,EAAEI,OAAO,CAAC,IAAIJ,MAAM;MAEvDA,MAAM,CAACK,MAAM,EAAEC,KAAK,EAAEC,OAAO,CAC3B;QACEC,IAAI,EAAE,gBAAgB;QACtBC,IAAI,EAAE,YAAY;QAClBC,GAAG,EAAE,CACH,4BAA4B,EAC5B;UACEC,MAAM,EAAE,YAAY;UACpBC,OAAO,EAAE;YACPC,QAAQ,EAAE,KAAK;YACfC,SAAS,EAAE;UACb;QACF,CAAC,EACD;UACEH,MAAM,EAAE;QACV,CAAC,CACF;QACDI,OAAO,EAAE;MACX,CAAC,EACD;QACEP,IAAI,EAAE,gBAAgB;QACtBC,IAAI,EAAE,YAAY;QAClBC,GAAG,EAAE,CACH,4BAA4B,EAC5B;UACEC,MAAM,EAAE,YAAY;UACpBC,OAAO,EAAE;YACPC,QAAQ,EAAE,KAAK;YACfG,OAAO,EACLC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,GACjC,IAAI,GACJ;cACEC,cAAc,EACZ;YACJ;UACR;QACF,CAAC,EACD;UACET,MAAM,EAAE;QACV,CAAC,CACF;QACDI,OAAO,EAAE;MACX,CACF,CAAC;MAED,OAAOf,MAAM;IACf,CAAC;IACD,OAAOA,MAAM;EACf,CAAC;AACH"}
{"version":3,"file":"index.js","names":["SvgPagesPlugin","SvgNextPlugin","config","nextConfigWebpack","webpack","SvgWebpackConfig","context","fileLoaderRule","module","rules","find","rule","test","push","resourceQuery","issuer","not","use","exclude"],"sources":["../src/index.ts"],"sourcesContent":["import { NextConfig } from 'next';\nimport { Configuration, RuleSetRule } from 'webpack';\n\nexport default function SvgPagesPlugin() {\n  return function SvgNextPlugin(config: NextConfig) {\n    const nextConfigWebpack = config.webpack;\n\n    config.webpack = function SvgWebpackConfig(\n      config: Configuration,\n      context: any\n    ) {\n      config = nextConfigWebpack?.(config, context) ?? config;\n\n      const fileLoaderRule = config.module?.rules?.find<RuleSetRule>(((\n        rule: RuleSetRule\n      ) => (rule.test as RegExp)?.test?.('.svg')) as any);\n\n      config.module?.rules?.push(\n        {\n          ...fileLoaderRule,\n          test: /\\.svg$/i,\n          resourceQuery: /url/,\n        },\n        {\n          test: /\\.svg$/i,\n          issuer: /\\.([jt]sx?|mdx?)$/,\n          resourceQuery: { not: /url/ },\n          use: ['@svgr/webpack'],\n        }\n      );\n\n      if (fileLoaderRule) {\n        fileLoaderRule.exclude = /\\.svg$/i;\n      }\n\n      return config;\n    };\n    return config;\n  };\n}\n"],"mappings":"AAGA,eAAe,SAASA,cAAcA,CAAA,EAAG;EACvC,OAAO,SAASC,aAAaA,CAACC,MAAkB,EAAE;IAChD,MAAMC,iBAAiB,GAAGD,MAAM,CAACE,OAAO;IAExCF,MAAM,CAACE,OAAO,GAAG,SAASC,gBAAgBA,CACxCH,MAAqB,EACrBI,OAAY,EACZ;MACAJ,MAAM,GAAGC,iBAAiB,GAAGD,MAAM,EAAEI,OAAO,CAAC,IAAIJ,MAAM;MAEvD,MAAMK,cAAc,GAAGL,MAAM,CAACM,MAAM,EAAEC,KAAK,EAAEC,IAAI,CAC/CC,IAAiB,IACbA,IAAI,CAACC,IAAI,EAAaA,IAAI,GAAG,MAAM,CAAS,CAAC;MAEnDV,MAAM,CAACM,MAAM,EAAEC,KAAK,EAAEI,IAAI,CACxB;QACE,GAAGN,cAAc;QACjBK,IAAI,EAAE,SAAS;QACfE,aAAa,EAAE;MACjB,CAAC,EACD;QACEF,IAAI,EAAE,SAAS;QACfG,MAAM,EAAE,mBAAmB;QAC3BD,aAAa,EAAE;UAAEE,GAAG,EAAE;QAAM,CAAC;QAC7BC,GAAG,EAAE,CAAC,eAAe;MACvB,CACF,CAAC;MAED,IAAIV,cAAc,EAAE;QAClBA,cAAc,CAACW,OAAO,GAAG,SAAS;MACpC;MAEA,OAAOhB,MAAM;IACf,CAAC;IACD,OAAOA,MAAM;EACf,CAAC;AACH"}